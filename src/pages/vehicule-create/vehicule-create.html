<!--
  Generated template for the VehiculeCreate page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-title>
      <span *ngIf="vehicule.matricule">{{vehicule.matricule}}</span><span *ngIf="!vehicule.matricule"> Nouveau vehicule</span>
    </ion-title>
    <ion-buttons start>
      <button ion-button="ion-button" (click)="dismiss()" icon-left>
          <ion-icon name="md-close" color="danger" showwhen="android,windows,core"></ion-icon> 
          Fermer
      </button>      
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content padding>
<ion-list *ngIf="vehicule">
    <form #form="ngForm"   novalidate>
      <ion-item>
        <ion-label floating color="primary">Immatriculation</ion-label>
        <ion-input [(ngModel)]="vehicule.matricule" name="matricule" #matricule   type="text" autocapitalize>
        </ion-input>
      </ion-item>
      <div ion-item *ngIf="isMatriculeInvalid()">
          <small  color= "danger">Saisir un numéro d'immatriculation valide !</small>
      </div>
      <ion-item (click)="selectMarque()">
        <h2 *ngIf="!marque">Choisir une marque</h2>
       <div *ngIf="marque" item-left>
          <img [src]="marque.logo" [alt]="">
       </div>
       <h2 *ngIf="marque">{{marque.nom}}</h2>
      </ion-item>       
      <ion-item>
        <ion-label floating color="primary">Modèle et couleur</ion-label>
        <ion-input [(ngModel)]="vehicule.description" name="description"  type="text" autocapitalize="on">
      </ion-input>
      </ion-item>
       <ion-item >
     <ion-label color="primary" floating>Date de mise en circulation</ion-label>
  <ion-datetime 
     displayFormat="DD/MM/YYYY"
    pickerFormat="D MMM  YYYY"  
     doneText="Terminé" cancelText="Annuler"
    name="dateMiseEnCirculation"
     [(ngModel)]="vehicule.dateMiseEnCirculation"
      #dateSave="ngModel"></ion-datetime>
</ion-item>              
<ion-item>
    <ion-label color="primary">Type de véhicule</ion-label>
    <ion-select [(ngModel)]="vehicule.type" name="type" #csp="ngModel" required="required">
        <ion-option value="Tourisme">Tourisme</ion-option>
        <ion-option value="Utilitaire">Utilitaire</ion-option>
    </ion-select>
</ion-item>   
       <ion-item>
        <ion-label floating color="primary">Vehicule conduit par</ion-label>
        <ion-input [(ngModel)]="vehicule.chauffeur" name="chauffeur"  type="text" autocapitalize="on">
        </ion-input>
      </ion-item>      
      <ion-item>
        <ion-label floating color="primary">Kilométrage initial</ion-label>
        <ion-input  [(ngModel)]="vehicule.index0" name="index0"  type="number"  >
        </ion-input>
      </ion-item>
      <ion-item>
        <ion-label floating color="primary">Coût à l'achat ({{devise}})</ion-label>
        <ion-input [(ngModel)]="vehicule.coutAchat" name="prix"   type="number" >
        </ion-input>
      </ion-item> 
      <div padding>
        <button ion-button full  icon-right color="primary" class="tangoAnimate quick tangoCentre" [disabled]="isInvalid() || submitted" (click)="onSubmit()" [ngClass]="setClass()">
            <span *ngIf="!submitted && action=='edit'" >Mettre à jour <ion-icon name="md-done-all"></ion-icon></span>
            <span *ngIf="!submitted && action=='create'" >Créer un véhicule <ion-icon name="md-done-all"></ion-icon></span>
            <ion-spinner [color]="spinnerColor" *ngIf="submitted"></ion-spinner>
      </button>
      </div>
    <div padding center *ngIf="action=='edit'">
  <button ion-button  outline block  color="danger" icon-right (click)="showConfirm()" [disabled]="submitted"> Supprimer le véhicule<ion-icon name="ios-close-circle"></ion-icon></button>      
  </div>     
    </form>
  </ion-list>
</ion-content>
